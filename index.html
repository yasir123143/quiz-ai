<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AI Quiz Game with Graphics</title>
  <style>
    body body {
  font-family: Arial, sans-serif;
  background: url("bg.jpg") no-repeat center center fixed;
  background-size: cover;
  color: #eee;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}
  </style>
</head>
<body>
  <div class="card">
    <h1>üé® My AI Quiz</h1>
    <div id="question">Click ‚ÄúNew Question‚Äù</div>
    <img id="qImage" src="" alt="" style="display:none;" />
    <div id="choices"></div>
    <button onclick="newQuestion()">New Question</button>
  </div>

  <script>
    async function newQuestion() {
      document.getElementById('question').textContent = "Loading...";
      document.getElementById('choices').innerHTML = "";
      document.getElementById('qImage').style.display = "none";

      const res = await fetch("/api/generate", { method:"POST" });
      const data = await res.json();

      try {
        const text = data.choices[0].message.content;
        const quiz = JSON.parse(text);

        document.getElementById('question').textContent = quiz.q;

        // If quiz has an image ‚Üí show it
        if (quiz.img) {
          document.getElementById('qImage').src = quiz.img;
          document.getElementById('qImage').style.display = "block";
        }

        quiz.options.forEach((opt,i)=>{
          const btn = document.createElement("button");
          btn.textContent = opt;
          btn.onclick = ()=> alert(i === quiz.answer ? "‚úÖ Correct!" : "‚ùå Wrong!");
          document.getElementById('choices').appendChild(btn);
        });
      } catch(e) {
        document.getElementById('question').textContent = "Error parsing AI output.";
        console.error(e, data);
      }
    }
  </script>
</body>
</html>
